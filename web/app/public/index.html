<!DOCTYPE html>
<html lang="en" class="{{ .Theme }}">
  <head>
    <meta charset="utf-8" />
    <title>{{ .UI.Title }}</title>
    <script type="text/javascript">
      (function() {
        // String is percent-encoded to prevent it from being replaced when ui config is injected
        if (document.title !== decodeURIComponent("%7B%7B%20.UI.Title%20%7D%7D")) { 
          window.config = {
            logo: "{{ .UI.Logo }}",
            header: "{{ .UI.Header }}",
            dashboardHeading: "{{ .UI.DashboardHeading }}",
            dashboardSubheading: "{{ .UI.DashboardSubheading }}",
            link: "{{ .UI.Link }}",
            buttons: [],
            maximumNumberOfResults: "{{ .UI.MaximumNumberOfResults }}",
            defaultSortBy: "{{ .UI.DefaultSortBy }}",
            defaultFilterBy: "{{ .UI.DefaultFilterBy }}",
            stateColors: {},
          };
          Function(`{{- range .UI.Buttons}}window.config.buttons.push({name:"{{ .Name }}",link:"{{ .Link }}"});{{end}}`)();
          Function(`{{- range $state, $color := .UI.StateColors }}window.config.stateColors["{{ $state }}"] = "{{ $color }}";{{end}}`)();
        } else {
          console.warn('Running in development mode; UI configuration is not injected.');
          document.title = 'Gatus (Development)';
          window.config = {
            stateColors: {"healthy": "#22C55E","maintenance": "#3B82F6","unhealthy": "#E43B3C"},
          };
        }

        window.config.localStateColors = {
          unknown: "#374151",
          invalid: "#8B5CF6"
        }

        // Initialize theme immediately to prevent flash
        const themeFromCookie = document.cookie.match(/theme=(dark|light);?/)?.[1];
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (themeFromCookie === 'dark' || (!themeFromCookie && prefersDark)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="{{ .UI.Favicon.Size32x32 }}" />
    <link rel="icon" type="image/png" sizes="16x16" href="{{ .UI.Favicon.Size16x16 }}" />
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials" />
    <link rel="shortcut icon" href="{{ .UI.Favicon.Default }}" />
    <link rel="stylesheet" href="/css/custom.css" />
    <meta name="description" content="{{ .UI.Description }}" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="{{ .UI.Title }}" />
    <meta name="application-name" content="{{ .UI.Title }}" />
    <meta name="theme-color" content="#f7f9fb" />
  </head>
  <body>
    <noscript><strong>Enable JavaScript to view this page.</strong></noscript>
    <div id="app"></div>
  </body>
</html>
